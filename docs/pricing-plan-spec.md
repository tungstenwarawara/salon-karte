# 料金プラン・機能制限 技術設計書（v2）

> 更新日: 2026-02-21
> ステータス: 設計のみ（実装は商用化フェーズ）
> 変更履歴: v1 → v2 全面改訂（プラン構造・料金・コスト分析）

---

## 0. 改訂の背景

v1 の問題点:
1. **プラン名が矛盾**: 「基本プラン」なのに名前が`pro` → ユーザーは序列を誤解する
2. **確定申告+500円は不当**: 実態はDB集計+CSV出力なのに月500円 → 「データを人質」感
3. **オプション7個は多すぎ**: ITリテラシー低いターゲットに選択疲れを生む
4. **損益分析が甘い**: インフラコストの従量課金を考慮していない
5. **機能別課金のコンセプト**: 調査の結果、サロン業務は機能間連携が密で単独課金に向かない

---

## 1. 事業者コスト構造（あなたの支出）

### 1.1 現在の契約状況（2026-02-21時点）

| 項目 | 現在のプラン | 月額 |
|------|-----------|------|
| Supabase | **Free（無料）** | 0円 |
| Vercel | **確認中** | 0円 or $20 |
| Claude Max 20x | **$200/月** | 約30,000円 |

> 現在のコスト = Claude Max のみ = 約30,000円/月

### 1.2 商用化時の固定費（Proプラン移行後）

Supabase Free → Pro へのアップグレードが必要になるタイミング:
- **写真機能を使うテスターが出た時点**（Free の Storage 上限 1GB）
- **7日間非アクティブ自動停止の回避**（Freeプランの制約。商用では致命的）

| 項目 | 月額 | 年額 | 備考 |
|------|------|------|------|
| Supabase Pro | $25（約3,750円） | $300（約45,000円） | DB 8GB + Storage 100GB 含む |
| Vercel Pro | $20（約3,000円） | $240（約36,000円） | 帯域1TB + Functions含む |
| Claude Max 20x | $200（約30,000円） | $2,400（約360,000円） | 開発ツール |
| ドメイン・SSL | 約150円 | 約1,800円 | .com 年額 |
| **固定費合計** | **約36,900円** | **約442,800円** | |

> **注意**: Claude Max は開発コストであり、ユーザー数に依存しない。
> 運用のみの固定費（Claude Max除外）= 約6,900円/月

### 1.3 フェーズ別コスト推移

| フェーズ | Supabase | Vercel | Claude Max | 合計 |
|---------|----------|--------|-----------|------|
| **現在（テスト期間）** | Free（0円） | 0〜3,000円 | 30,000円 | 約30,000〜33,000円 |
| **テスター増加期** | Pro（3,750円）※1 | Pro（3,000円） | 30,000円 | 約36,750円 |
| **商用化後** | Pro + 従量課金 | Pro（3,000円） | 30,000円 | 約36,900円〜 |

※1 テスターが写真を本格利用し始めた時点で Free → Pro 移行が必要

### 1.4 変動費（ユーザー増加時の従量課金）

#### Supabase の従量課金トリガー

| リソース | Pro無料枠 | 超過単価 | ボトルネック到達点 |
|---------|----------|---------|----------------|
| DB容量 | 8GB | $0.125/GB | 約160サロン（1サロン≒50MB） |
| Storage | 100GB | $0.021/GB | **約20サロン**（1サロン≒5GB写真） |
| 帯域 | 250GB | $0.09/GB | 約100サロン |
| MAU | 100,000 | $0.00325/人 | 到達不可（個人サロンSaaS） |
| Edge Functions | 200万回 | $2/100万回 | 到達不可 |

#### **最初のボトルネック: Storage（写真）**

写真保存がコスト増の最大要因。1サロンあたり5GBフル使用した場合:

| サロン数 | 写真Storage | 無料枠内? | Storage超過料金 |
|---------|------------|----------|---------------|
| 10 | 50GB | ○ | $0 |
| 20 | 100GB | ギリギリ | $0 |
| 30 | 150GB | × | $1.05/月（約158円） |
| 50 | 250GB | × | $3.15/月（約473円） |
| 100 | 500GB | × | $8.40/月（約1,260円） |
| 200 | 1TB | × | $18.90/月（約2,835円） |

> **現実的には**: 全サロンが5GBフル使用することはない。平均2〜3GB程度と想定すると、50サロンまで無料枠内に収まる可能性が高い。

#### Vercel の従量課金トリガー

| リソース | Pro無料枠 | 超過単価 | ボトルネック到達点 |
|---------|----------|---------|----------------|
| 帯域 | 1TB | 従量課金 | 1,000サロン以上 |
| Functions | 含む | $0.60/100万回 | 到達困難 |

> Vercel は100サロン程度では超過しない。

### 1.5 Stripe 決済手数料

| 項目 | 料率 |
|------|------|
| クレジットカード決済 | 3.6% |
| 2,980円の場合 | 107円/決済 |
| 実質手取り | 2,873円/サロン |

---

## 2. 損益シミュレーション

### 2.1 サロン数別の月次損益

#### 前提条件
- 運用固定費: 6,900円/月（Supabase Pro $25 + Vercel Pro $20）
- 開発費（Claude Max 20x）: 30,000円/月（$200。商用化後も継続利用と仮定）
- 月額: 2,980円/サロン（Stripe手数料3.6%差引後 = 2,873円/サロン）
- Storage: 平均2.5GB/サロン（圧縮済み）
- 全固定費合計: 36,900円/月

| 有料サロン数 | 月売上 | 手取り(税引前) | 運用固定費 | 変動費 | 営業利益 | 全コスト込み利益 |
|------------|--------|-------------|----------|--------|---------|--------------|
| 1 | 2,980 | 2,873 | 6,900 | 0 | **-4,027** | **-34,027** |
| 3 | 8,940 | 8,619 | 6,900 | 0 | **+1,719** | **-28,281** |
| 5 | 14,900 | 14,365 | 6,900 | 0 | **+7,465** | **-22,535** |
| 10 | 29,800 | 28,730 | 6,900 | 0 | **+21,830** | **-8,170** |
| **13** | **38,740** | **37,349** | **6,900** | **0** | **+30,449** | **+449** |
| 20 | 59,600 | 57,460 | 6,900 | 0 | **+50,560** | **+20,560** |
| 50 | 149,000 | 143,650 | 6,900 | 500 | **+136,250** | **+106,250** |
| 100 | 298,000 | 287,300 | 6,900 | 1,500 | **+278,900** | **+248,900** |

### 2.2 損益分岐点

| 条件 | 必要サロン数 | 月売上 |
|------|-----------|--------|
| 運用費のみ回収（Supabase+Vercel） | **3サロン** | 8,940円 |
| **全コスト回収（+Claude Max $200）** | **13サロン** | 38,740円 |
| 月10万円利益（全コスト込み） | **48サロン** | 143,040円 |
| 月30万円利益（全コスト込み） | **118サロン** | 351,640円 |

### 2.3 Claude Max を下位プランに変更した場合

開発が安定してメンテナンス中心になれば、Claude Pro（$20/月=約3,000円）に変更可能。

| 条件 | Max 20x ($200) | Pro ($20) | Max不使用 |
|------|---------------|-----------|----------|
| 開発費 | 30,000円 | 3,000円 | 0円 |
| 全固定費 | 36,900円 | 9,900円 | 6,900円 |
| 全コスト回収 | 13サロン | 4サロン | 3サロン |
| 月10万利益 | 48サロン | 38サロン | 38サロン |

> **戦略**: 開発期間中は Max 20x で高速開発 → 商用安定後は Pro に切り替えてコスト削減

### 2.3 写真Storageのコスト管理策

写真が最初のコスト増要因であるため、以下の対策を設計:

| 対策 | 効果 | 実装難度 |
|------|------|---------|
| アップロード時の自動圧縮（実装済み） | 1枚あたり容量を50〜80%削減 | ✅完了 |
| 5GB上限（プラン制限） | 1サロンの上限を明確化 | 低 |
| 古い写真の自動アーカイブ（2年超） | 長期Storage削減 | 中 |
| Signed URL 1時間有効（実装済み） | 帯域の無駄使い防止 | ✅完了 |

> **結論**: 写真圧縮が実装済みのため、実質的に1サロンの使用量は2〜3GB程度に収まる。100サロンまではインフラコスト増の心配は不要。

---

## 3. 新プラン設計

### 3.1 設計コンセプト

**「選ばなくていい。使うだけ。」**

- ITリテラシーの低い個人サロンオーナーに「機能を選んで組み合わせる」を求めない
- 2択のシンプルな料金体系
- 差別化機能（確定申告・在庫）は無料提供して口コミの武器にする
- 課金の壁は「機能」ではなく「量」に置く

### 3.2 プラン構成

| プラン名 | 内部名 | 月額 | 位置づけ |
|---------|--------|------|---------|
| **おためし** | `free` | 0円 | 小規模サロン・お試し用 |
| **スタンダード** | `standard` | 2,980円/月 | 全機能使える本命プラン |
| *(テスター)* | `tester` | *(非公開)* | テスター用・全機能無制限 |

> **旧プランとの対比**:
> - ~~trial~~ → 廃止（おためしプランが常時無料で代替）
> - ~~basic~~ → 「おためし」に改名・機能拡充
> - ~~pro~~ → 「スタンダード」に改名（「これが標準」のメッセージ）

### 3.3 機能比較マトリクス

| 機能 | おためし（0円） | スタンダード（2,980円） | テスター |
|------|--------------|---------------------|---------|
| **顧客管理** | 10件まで | **無制限** | 無制限 |
| **施術カルテ** | 無制限 | 無制限 | 無制限 |
| **予約管理** | 月10件まで | **無制限** | 無制限 |
| **写真保存** | なし | **5GB** | 5GB |
| **物販・回数券** | ○ | ○ | ○ |
| **売上レポート** | 当月のみ | **全期間** | 全期間 |
| **在庫管理** | ○ | ○ | ○ |
| **確定申告レポート** | ○ | ○ | ○ |
| **CSVエクスポート** | ○ | ○ | ○ |
| **離脱アラート** | ○ | ○ | ○ |
| **LINE連携** | — | **○（将来）** | ○ |
| **カウンセリングシート** | — | **○（将来）** | ○ |
| **詳細分析レポート** | — | **○（将来）** | ○ |

### 3.4 この設計の根拠

#### なぜ確定申告・CSV・在庫を全プラン無料にするのか

1. **確定申告サポートは競合ゼロの唯一無二の差別化ポイント**
   - 有料の壁の後ろに隠す → 最大の武器を封印するのと同じ
   - 実態は「既にDB内にあるデータの集計表示+CSV出力」→ 限界コストほぼゼロ
   - 「物販を記録するだけで確定申告がラクになる」は最強の口コミフレーズになる

2. **CSVエクスポートの課金は悪手**
   - 調査結果: CSVに課金しているSaaSはユーザーから最も反感を買う
   - 「自分のデータを取り出す権利」に課金 → ロックイン感・不信感
   - 競合の大半が有料プランの基本機能として含んでいる

3. **在庫管理は物販・回数券・確定申告と密結合**
   - 切り離すと体験が中途半端
   - 在庫管理のインフラコスト = ほぼゼロ（DBの数行が増えるだけ）

#### なぜ課金の壁を「量」に置くのか

- 「機能が使えない」→ 不満
- 「もっと使いたい」→ 購買動機
- 顧客10件・予約月10件 → 実業務で使い始めると自然に上限に当たる
- LiMEの「カルテ1人5枚まで」と同じ原理

#### なぜ2,980円で全部入りにするのか

- 旧: 基本2,980 + 在庫500 + 確定申告500 + ... = 5,480円〜 → 複雑で高い
- 新: 2,980円で全部 → 心理的税金ゼロ、「これ以上考えなくていい」
- 個人サロンの心理的ハードル = 月5,000円 → 2,980円は安心圏内
- 全機能込みの方が転換率が上がり、損益分岐3サロンの達成が容易に

#### なぜ機能別課金（アラカルト）をやめるのか

調査結果:
- 「各モジュールが独立して価値を持つ」場合のみアラカルトが成功する
- サロン業務は カルテ↔予約↔物販↔在庫↔確定申告 が密結合 → 単独では価値が薄い
- ターゲットのITリテラシーが低い → 選択肢が多いと離脱する（5個超で判断放棄）
- 成功事例（オフィスステーション等）は「人事労務」のように機能が完全独立の場合のみ

---

## 4. 将来の追加収益源（別プロダクト方式）

単機能+500円オプションではなく、独立した価値を持つ別プロダクトに課金する。

| プロダクト | 月額 | 独立した価値 | 優先度 |
|-----------|------|------------|--------|
| salon-karte（本体） | 2,980円 | カルテ・予約・物販・在庫・確定申告 | ★★★ |
| salon-site（HP+Web予約） | 3,980円 | 集客（ホットペッパー代替） | ★★ |
| salon-ec（ECサイト） | 2,980円 | EC売上チャネル | ★ |
| **セット割（3つ全部）** | **7,980円** | 通常9,940円 → 約20%OFF | — |

> **ポイント**: 「機能を選ぶ」のではなく「プロダクトを選ぶ」→ 3択以下で明快
> 各プロダクトは単独で完結した価値を持つため、アラカルトの問題が起きない

### セット割時の損益

| セットユーザー数 | 月売上 | 手取り（3.6%引） | 運用費 | 月利益 |
|---------------|--------|----------------|--------|--------|
| 10 | 79,800 | 76,927 | 6,900 | +70,027 |
| 50 | 399,000 | 384,636 | 7,400 | +377,236 |

---

## 5. 競合との価格比較（改訂版）

| 比較項目 | salon-karte | LiME | Square予約 | KaruteKun | Bionly有料 | リザービア |
|---------|------------|------|-----------|-----------|----------|----------|
| **月額** | **2,980円** | 売上連動(1,020〜) | 0〜3,000円 | 5,500円 | 9,800円〜 | 15,000円〜 |
| 初期費用 | 0円 | 0円 | 0円 | 0円 | 要問合 | 100,000円 |
| カルテ | **無制限** | 5枚/人(無料) | × | ○ | ○ | 簡易 |
| 予約 | **無制限** | 5件/月(無料) | ○ | ○ | ○ | ○ |
| 回数券 | **○** | - | - | - | - | - |
| 物販+在庫 | **○（込み）** | - | ○(基本) | - | ○ | - |
| 確定申告 | **○（込み）** | - | - | - | - | - |
| CSV出力 | **○（込み）** | 有料 | ○ | ○ | ○ | ○ |
| 写真 | **5GB** | - | - | ○ | ○ | - |
| LINE連携 | 将来（込み） | - | - | +5,500円 | - | +4,500円 |

> **salon-karteの圧倒的優位**: 2,980円で確定申告・在庫・回数券・CSVが全て込み。
> 競合で最も近いBionly有料（9,800円〜）の1/3以下の価格で同等以上の機能。

---

## 6. DB設計（マイグレーション案）

### salons テーブルへのカラム追加

```sql
-- 00023_plan_type.sql（商用化時に適用）

ALTER TABLE salons ADD COLUMN plan_type TEXT NOT NULL DEFAULT 'tester'
  CHECK (plan_type IN ('tester', 'free', 'standard'));

ALTER TABLE salons ADD COLUMN plan_started_at TIMESTAMPTZ DEFAULT now();
```

- デフォルト値 `'tester'` → 既存サロンは全機能開放のまま
- `plan_started_at` → 利用開始日の記録

### database.ts 型追加（商用化時）

```typescript
// salons.Row に追加
plan_type: 'tester' | 'free' | 'standard';
plan_started_at: string;
```

---

## 7. 機能ゲートの実装方式

### 7.1 プラン定義ファイル（src/lib/plan.ts）

```typescript
export type PlanType = 'tester' | 'free' | 'standard';

export type PlanLimits = {
  maxCustomers: number;         // Infinity = 無制限
  maxAppointmentsPerMonth: number; // Infinity = 無制限
  photosEnabled: boolean;
  salesReportFullHistory: boolean; // false = 当月のみ
  lineEnabled: boolean;
  counselingSheetEnabled: boolean;
  advancedAnalyticsEnabled: boolean;
  maxPhotoStorageMB: number;
};

const PLAN_DEFINITIONS: Record<PlanType, PlanLimits> = {
  tester: {
    maxCustomers: Infinity,
    maxAppointmentsPerMonth: Infinity,
    photosEnabled: true,
    salesReportFullHistory: true,
    lineEnabled: true,
    counselingSheetEnabled: true,
    advancedAnalyticsEnabled: true,
    maxPhotoStorageMB: 5120,
  },
  free: {
    maxCustomers: 10,
    maxAppointmentsPerMonth: 10,
    photosEnabled: false,
    salesReportFullHistory: false,
    lineEnabled: false,
    counselingSheetEnabled: false,
    advancedAnalyticsEnabled: false,
    maxPhotoStorageMB: 0,
  },
  standard: {
    maxCustomers: Infinity,
    maxAppointmentsPerMonth: Infinity,
    photosEnabled: true,
    salesReportFullHistory: true,
    lineEnabled: true,
    counselingSheetEnabled: true,
    advancedAnalyticsEnabled: true,
    maxPhotoStorageMB: 5120,
  },
};
```

> **変更点（v1→v2）**:
> - `inventoryEnabled` / `taxReportEnabled` 削除 → 全プラン無料化
> - `maxAppointmentsPerMonth` 追加 → 予約の量制限
> - `salesReportFullHistory` 追加 → レポート期間制限
> - `lineEnabled` / `counselingSheetEnabled` / `advancedAnalyticsEnabled` 追加

### 7.2 Client hook / FeatureGate（v1と同様）

v1のコードをそのまま使用。PlanType の定義だけ変更。

### 7.3 getAuthAndSalon() への統合

```typescript
// auth-helpers.ts（商用化時に変更）
.select("id, name, phone, address, business_hours, salon_holidays, plan_type, plan_started_at")
```

---

## 8. リバーストライアル戦略

### 概要

最も転換率が高い「リバーストライアル」方式を採用:

```
新規登録 → 30日間スタンダード全機能開放
         → 31日目に「おためし」に自動縮退
         → 顧客11件目を登録しようとした時にアップグレード案内
```

### なぜリバーストライアルか

| 方式 | 転換率 | 理由 |
|------|--------|------|
| フリーミアム（機能制限） | 2〜5% | 価値を体験する前に壁に当たる |
| 無料トライアル（期間制限） | 10〜15% | 期間中に使い込まないまま終わる |
| **リバーストライアル** | **15〜25%** | 全機能を体験→価値を理解→縮退が嫌で課金 |

### 実装

```typescript
// リバーストライアル判定
function getEffectivePlan(salon: Salon): PlanType {
  if (salon.plan_type === 'tester') return 'tester';
  if (salon.plan_type === 'standard') return 'standard';

  // free プランでも登録30日以内はスタンダード扱い
  const daysSinceStart = differenceInDays(new Date(), new Date(salon.plan_started_at));
  if (daysSinceStart <= 30) return 'standard';

  return 'free';
}
```

---

## 9. 実装しないこと（商用化フェーズまで保留）

- Stripe Checkout / Customer Portal 連携
- Webhook による plan_type 自動更新
- RLS ポリシーでの顧客件数ハードリミット
- middleware.ts でのルートレベルブロック
- subscriptions テーブル

---

## 10. Stripe連携の方針（商用化フェーズで実装）

### フロー

```
1. 新規登録 → plan_type = 'free', plan_started_at = now()
2. 30日間はスタンダード扱い（リバーストライアル）
3. 31日目以降、顧客11件目登録時にアップグレード案内
4. ユーザーが「スタンダードにする」→ Stripe Checkout
5. 決済完了 → Webhook で plan_type = 'standard' に更新
6. 解約/失敗 → plan_type = 'free' に戻す
```

### 必要なテーブル（商用化フェーズで追加）

```sql
CREATE TABLE subscriptions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  salon_id UUID NOT NULL REFERENCES salons(id) ON DELETE CASCADE,
  stripe_customer_id TEXT NOT NULL,
  stripe_subscription_id TEXT NOT NULL,
  status TEXT NOT NULL, -- 'active' | 'trialing' | 'past_due' | 'canceled'
  current_period_end TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT now()
);
```

---

## 11. テスター全機能開放の仕組み

- `plan_type = 'tester'` がデフォルト値（既存サロンはそのまま）
- tester は全機能無制限（リバーストライアルの30日制限も適用されない）
- テスター期間終了時に plan_type を 'free' or 'standard' に更新
- テスター特典: 正式リリース後6ヶ月間スタンダード無料

---

## 12. 競合にない未実装機能の優先度

スタンダードプラン2,980円の価値を最大化するために実装すべき機能:

| 機能 | 競合状況 | salon-karte | 優先度 | 2,980円に含める根拠 |
|------|---------|------------|--------|-------------------|
| LINE連携（リマインド） | KaruteKun +5,500円 | 未実装 | **最高** | 競合が高額課金 → 込みなら圧倒的優位 |
| カウンセリングシート | coming-soon標準搭載 | 未実装 | **高** | エステ特化の差別化 |
| 詳細分析（LTV・リピート率） | Bionly有料に搭載 | 未実装 | **中** | データ蓄積後に価値 |
| カルテPDF出力 | 一部競合に搭載 | 未実装 | **中** | 税理士提出用で需要 |

### LINE連携のコスト影響

| 項目 | 費用 |
|------|------|
| LINE Messaging API | 無料（月200通まで）/ ライトプラン5,000通 5,000円 |
| salon-karteでの運用 | 1サロンあたり月50〜100通で収まる → 無料枠内 |
| 200サロン超の場合 | LINE公式アカウントはサロンごとに作成 → salon-karteにコスト転嫁なし |

> LINE連携は**サロンオーナーが自分のLINE公式アカウントを接続する方式**のため、メッセージ送信コストはオーナー負担。salon-karteのインフラコストは増加しない。

---

## 13. 年次収益目標

| マイルストーン | 有料サロン数 | 月売上 | 月利益（全コスト込み） | 達成見込み |
|-------------|------------|--------|-------------------|----------|
| 損益分岐（運用費のみ） | 3 | 8,940円 | +1,719円 | リリース後1〜2ヶ月 |
| 損益分岐（全コスト） | 13 | 38,740円 | +449円 | リリース後3〜6ヶ月 |
| 副業レベル | 20 | 59,600円 | +20,560円 | リリース後6〜9ヶ月 |
| Claude Pro切替後の副業 | 20 | 59,600円 | +47,560円 | 開発安定後 |
| 本業レベル | 100 | 298,000円 | +248,900円 | リリース後1〜2年 |

### 前提: 個人サロン市場の規模

- 日本のエステサロン数: 約30,000〜50,000店（個人含む）
- 個人経営サロン: 推定60%以上 → 約20,000〜30,000店
- salon-karteがターゲットにできる層: ITリテラシー中程度の個人サロン → 推定5,000〜10,000店
- 100サロン獲得 = ターゲット市場の1〜2% → 現実的な目標

---

## 14. システムライフサイクル

### 14.1 フェーズ定義

```
[投資期]       [検証期]        [判断期]      [成長 or 撤退]
2026/2〜5      2026/6〜8       2026/9        2026/10〜
 開発・テスター   商用リリース      KPI評価        継続 or 終了
```

| フェーズ | 期間 | やること | コスト |
|---------|------|---------|--------|
| **投資期** | 2〜5月（現在） | 開発・テスター運用 | Claude Max のみ（約30,000円/月） |
| **検証期** | 6〜8月 | 商用リリース・集客開始 | 全固定費（約36,900円/月） |
| **判断期** | 9月 | KPI評価・撤退判断 | 同上 |
| **成長期** | 10月〜 | 機能追加・スケール | 同上 + 従量課金 |
| or **撤退** | 10月〜12月 | 告知→猶予→終了 | 運用費のみ（約6,900円/月） |

### 14.2 撤退判断のKPI基準（9月に評価）

| KPI | 継続ライン | 撤退ライン |
|-----|----------|----------|
| 有料サロン数 | 3以上 | 2以下 |
| 有料転換率 | 10%以上 | 5%以下 |
| 月次チャーン率（解約率） | 5%以下 | 15%以上 |
| ユーザーの利用頻度 | 週3回以上ログイン | 月1回以下 |

> **有料3サロン = 運用費の損益分岐**。ここを超えていればClaude Maxを下位に切り替えてでも継続する価値がある。
> 2以下ならプロダクトマーケットフィットしていない可能性が高い。

### 14.3 コスト段階的縮小の判断フロー

```
有料3サロン未満 かつ 転換率5%以下
  → Claude Max 解約（-30,000円/月）→ 月コスト 6,900円に縮小
  → それでも改善見込みなし → 撤退決断

有料3サロン以上 だが 13サロン未満
  → Claude Max を Pro($20) に切替（-27,000円/月）
  → 月コスト 9,900円 → 4サロンで黒字
  → 継続しつつ成長を図る

有料13サロン以上
  → 全コスト回収済み → 成長フェーズへ
```

---

## 15. 撤退戦略と既存ユーザー救済

### 15.1 撤退時のコスト構造

| 項目 | 止められるか | 方法 |
|------|-----------|------|
| Claude Max $200 | **即座に停止可能** | 解約するだけ |
| Vercel Pro $20 | **即座に停止可能** | Hobbyに戻す or 解約 |
| Supabase Pro $25 | **停止するとDBが止まる** | 猶予期間中は維持が必要 |

> 1サロンだけ残っている場合: 売上2,873円 − Supabase Pro 3,750円 = **月877円の赤字**
> → DBを動かし続ける限り赤字になるため、猶予期間を設けた上で停止が必要

### 15.2 既存ユーザーへの救済措置

| 措置 | 内容 | コスト |
|------|------|--------|
| **① CSVフルエクスポート** | 全データ（顧客・カルテ・予約・売上・在庫・回数券）をCSVで一括ダウンロード | 0円（機能として実装） |
| **② 猶予期間（3ヶ月）** | 終了告知から3ヶ月間は無料で継続利用可能 | 約20,250円（6,750円×3ヶ月） |
| **③ 移行先の案内** | 競合サービス（KaruteKun, LiME, Square予約等）の比較リストを提供 | 0円 |
| **④ 写真データの一括ダウンロード** | Supabase Storageの写真を全てZIPでダウンロード可能にする | 0円（機能として実装） |

> **最大撤退コスト = 猶予期間3ヶ月分 = 約20,250円**
> CSVエクスポートは通常機能としても有用なため、撤退有無にかかわらず実装する。

### 15.3 撤退タイムライン

```
9月:    撤退決断
        → Claude Max 即時解約（-30,000円/月）
        → 新規登録を停止

10月:   既存ユーザーに告知（メール + アプリ内通知）
        → 「12月末でサービスを終了します」
        → CSVエクスポート機能をリリース（全データ対応）
        → 写真一括ダウンロード機能をリリース
        → 移行先サービスの比較リストを提供

11〜12月: 猶予期間
        → 無料で利用継続
        → コスト = Supabase Pro $25 + Vercel Pro $20 = 約6,750円/月

12/31:  サービス停止
        → Supabase プロジェクト停止
        → Vercel プロジェクト削除

撤退総コスト = 猶予期間3ヶ月 × 6,750円 = 約20,250円
```

### 15.4 撤退コストを最小化するために今やるべきこと

| 対応 | 目的 | 状態 |
|------|------|------|
| CSVエクスポート（全データ対応） | 撤退時にも通常機能としても有用 | 計画済み（スタンダードに含む） |
| 写真一括ダウンロード | ユーザーの写真資産を保護 | 未実装 |
| 利用規約にサービス終了条項 | 3ヶ月前告知義務を法的に明確化 | **未作成（要対応）** |
| データポータビリティの明記 | 「あなたのデータはいつでも持ち出せます」 | **未作成（要対応）** |
| 年間契約を避ける | 月額のみにすれば返金問題が発生しない | 月額のみの設計済み |
| Stripe の解約フローを明確化 | ユーザーがいつでも解約できる導線 | 商用化フェーズで実装 |

---

## 16. まとめ: v1 → v2 の変更サマリー

| 項目 | v1 | v2 | 理由 |
|------|-----|-----|------|
| プラン数 | 4（tester/trial/basic/pro） | 3（tester/free/standard） | シンプル化 |
| プラン名 | basic/pro | おためし/スタンダード | 序列の明確化 |
| 確定申告 | +500円オプション | **全プラン無料** | 差別化の武器を開放 |
| 在庫管理 | +500円オプション | **全プラン無料** | 密結合機能を分離しない |
| CSV出力 | +300円オプション | **全プラン無料** | データ人質感の排除 |
| オプション数 | 7個 | **0個** | 選択疲れの排除 |
| 追加収益 | 機能別+500円〜 | **別プロダクト方式** | 独立した価値単位で課金 |
| 損益分析 | 概算のみ | **従量課金込みの詳細版** | 写真Storageのコスト予測 |
| トライアル | 期間制限 | **リバーストライアル** | 転換率15〜25%（最高） |
